---
## Front matter
lang: ru-RU
title: Laboratory №12
author: |
	Bezruk M.A.
institute: |
	RUDN University, Moscow, Russian Federation
	
date: MAY--2021

## Formatting
toc: false
slide_level: 2
theme: metropolis
header-includes: 
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'
aspectratio: 43
section-titles: true
---

## Цель работы

Изучить основы программирования в оболочке ОС UNIX. Научится писать более сложные командные файлы с использованием логических управляющих конструкций и циклов.

## Задание

1.Ознакомиться с теоретическим материалом.

2.Изучить основы программирования в оболочке ОС UNIX/Linux.

3.Выполнить упражнения.

4.Ответить на контрольные вопросы.

## Выполнение:

1)Используя команды getoptsgrep, написалакомандный файл, который анализирует командную строку с ключами: 

-iinputfile — прочитать данные из указанного файла;

 -ooutputfile — вывести данные в указанный файл; 
 
 -pшаблон — указать шаблон для поиска;
 
 -C — различать большие и малые буквы; 
 
 -n — выдавать номера строк,а затем ищет в указанном файле нужные строки, определяемые ключом –p.
 
 Для  данной  задачи  я  создала  файл prog1.sh и  написала соответствующие скрипты.


##

Далее  я  проверила работу написанного скрипта,  используя  различные опции (например, команда «./prog.sh–Ia1.txt–oa2.txt–pcapital–C-n»), предварительно добавив право на исполнение файла (команда «chmod+xprog1.sh») и  создав  2  файла,  которые  необходимы  для  выполнения программы: a1.txtи a2.txt

![Проверка скрипта](image/2.png){ #fig:003 width=30% }

Скрипт работает корректно.

##

2) Написала на языке Си программу, которая вводит число и определяет, является  ли  оно  больше  нуля,  меньше  нуля  или  равно  нулю.  Затем программа  завершается  с  помощью  функции exit(n),  передавая информацию в о коде завершения в оболочку. Командный файл должен вызывать  эту  программу  и,  проанализировав  с  помощью  команды  $?, выдать сообщение о том, какое число было введено. Для  данной  задачи  я  создала  2  файла: chislo.c и chislo.sh и написала соответствующие скрипты.

##

![Третий скрипт](image/5.png){ #fig:005 width=30% }

##

Далее я проверила работу написанных скриптов (команда «./chislo.sh»), предварительно добавив право на исполнение файла (команда «chmod+x chislo.sh»)


Скрипты работают корректно.

##

3)  Написала командный  файл,  создающий  указанное  число  файлов, пронумерованных  последовательно  от  1  до N (например  1.tmp,  2.tmp, 3.tmp,4.tmpи т.д.). Число файлов, которые необходимо создать, передаётся в аргументы командной строки. Этот же командный файл должен уметь удалять все созданные им файлы (если они существуют). Для  данной  задачи  я  создала  файл: files.sh и  написала соответствующий скрипт.

![Четвертый скрипт](image/7.png){ #fig:007 width=40% }

##

Далее  я  проверила  работу  написанного  скрипта  (команда «./files.sh»), предварительно добавив право на исполнение файла (команда «chmod+x files.sh»). Сначала я создала три файла (команда «./files.sh–cabc#.txt3»), удовлетворяющие условию задачи, а потом удалила их (команда «./files.sh–rabc#.txt3»)

![Проверка скрипта](image/8.png){ #fig:008 width=40% }

##

4)  Написала командный  файл,  который  с  помощью  команды tar запаковывает в архив все файлы в указанной директории. Модифицировалаего так, чтобы запаковывались только те файлы, которые были изменены менее недели тому назад (использовать команду find). Для  данной  задачи  я  создала  файл: prog4.sh и  написала соответствующий скрипт.

![Пятый скрипт](image/9.png){ #fig:009 width=40% }

##

Далее я проверила работу написанного скрипта (команды«sudo~/prog4.sh» и «tar-tfCatalog1.tar»),  предварительно  добавив  право  на  исполнение файла  (команда «chmod+xprog4.sh»)и  создав  отдельный catalog1  с несколькими файлами. Файлы ,измененные более недели назад, заархивированы не были.

![Проверка скрипта](image/10.png){ #fig:010 width=40% } 

Скрипт работает корректно.

## Вывод

В ходе выполнения данной лабораторной работы я изучила основы программирования в оболочке ОС UNIX и научилась писать более сложные командные файлы с использованием логических управляющих конструкций и циклов.

##

The end.

